import { Program } from "typescript";
import { Plugin, CompilerOptions, EmitFile, EmitHost } from "typescript-to-lua";

const comment: string = `-- Generated by xrf util at: ${new Date().toString()}\n\n`;

const plugin: Plugin = {
  beforeEmit(program: Program, options: CompilerOptions, emitHost: EmitHost, result: Array<EmitFile>) {
    void program;
    void options;
    void emitHost;

    for (const file of result) {
      file.code = comment + file.code;
    }
  },
};

export default plugin;
